<!DOCTYPE html>
<html lang="es">
<%- include("../partials/head") %> 

    
<body class="profile <%= user.category %>">
    <%- include("../partials/header") %> 
    <main class="profile__main">
        <section class="profile__section">
            <% if (user.category === "normal") { %>
                <h1 class="white__word">¡Bienvenido <p class="green__word"><%= user.nombreUsuario !== "" ? user.nombreUsuario : user.nombre %> %></p>!</h1>
            <% } else { %>
                <h1 class="white__word">¡Bienvenido de vuelta <p class="green__word"><%= user.nombreUsuario !== "" ? user.nombreUsuario : user.nombre %></p>!</h1>
                <h2 class="white__word">¿Qué tal has estado?</h2>
            <% } %>
            <form action="?_method=PUT" method="post" class="profile__form">
                <div class="profile__form__l--container">
                    <div class="profile__imgPerfil">
                        <img src="/images/<%= user.image ? user.image : 'perfil por defecto.jpg' %> " alt="imagenPerfil">
                        <input name="image" type="file" id="image" placeholder="Seleccionar foto">
                    </div>
                    <div class="profile__formulario">
                        <div class="profile__form__box">
                            <label class="form__label" for="nombre">Nombre</label>
                            <input class="form__input" type="text" id="nombre" name="nombre" value="<%= user.nombre %>">
                            <p class="errorText"><%= locals.errors && errors.nombre ? errors.nombre.msg : null %></p>
                        </div>
                        <div class="profile__form__box">
                            <label class="form__label" for="apellido">Apellido</label>
                            <input class="form__input" type="text" id="apellido" name="apellido" value="<%= user.apellido %>">
                            <p class="errorText"><%= locals.errors && errors.apellido ? errors.apellido.msg : null %></p>
                        </div>
                        <div class="profile__form__box">
                            <label class="form__label" for="usuario">Nombre de usuario</label>
                            <input class="form__input" type="text" id="usuario" name="nombreUsuario" value="<%= user.nombreUsuario %>">
                            <p class="errorText"><%= locals.errors && errors.nombreUsuario ? errors.nombreUsuario.msg : null %></p>
                        </div>
                        <div class="profile__form__box">
                            <label class="form__label" for="email">Correo electrónico</label>
                            <input class="form__input" type="email" id="email" name="email" value="<%= user.email %>">
                            <p class="errorText"><%= locals.errors && errors.email ? errors.email.msg : null %></p>
                        </div>
                        <div class="profile__form__box">
                            <label class="form__label" for="password">Contraseña</label>
                            <input class="form__input" type="password" id="password" name="password">
                            <p class="errorText"><%= locals.errors && errors.password ? errors.password.msg : null %></p>
                        </div>
                    </div>
                </div>
                <div class="profile__actionButtons__container">
                    <a href="/users/logout">
                        <div class="profile__enviar__button">Cerrar sesión</div>
                    </a>
                    <a href="/">
                        <button class="profile__cancelar__button">Cancelar</button>
                    </a>
                    <button type="submit" class="profile__enviar__button">Guardar Perfil</button>
                </div>
            </form>
        </section>
    </main>
    <%- include("../partials/footer") %> 
</body>
</html>